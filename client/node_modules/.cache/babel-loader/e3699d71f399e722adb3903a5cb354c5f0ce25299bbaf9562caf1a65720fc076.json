{"ast":null,"code":"var _jsxFileName = \"/Users/oksanapopova/Desktop/ReactUserList/client/src/pages/UserListPage/UserList.jsx\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { Formik, Field, Form } from \"formik\";\nimport '../style.scss';\nimport { v4 as uuidv4 } from 'uuid';\nimport { API_SAVE_ITEM, API_LIST, API_DELETE_ITEM } from '../../urls';\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function UserList() {\n  _s();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [list, setList] = useState([]);\n  const [token, setToken] = useState('');\n  const headers = {\n    'Authorization': token,\n    'Content-Type': 'application/json'\n  };\n  const newData = async () => {\n    await axios.get(API_LIST, {\n      headers\n    }).then(response => {\n      setList(response.data.todos);\n    }).catch(error => {\n      console.error('Error:', error);\n    });\n  };\n  useEffect(() => {\n    try {\n      if (location.state.token) {\n        setToken(location.state.token);\n        newData().then();\n      }\n    } catch (error) {\n      console.error(error);\n      navigate('/error');\n    }\n  }, []);\n  const save = async values => {\n    const postData = {\n      id: list.length + 1,\n      name: values.newItem\n    };\n    await axios.post(API_SAVE_ITEM, postData, {\n      headers\n    }).then(response => {\n      console.log('Response:', response.data.message);\n    }).catch(error => {\n      console.error('Error:', error);\n    });\n    newData().then();\n  };\n  const deleteLine = async itemId => {\n    const postData = {\n      id: itemId\n    };\n    await axios.post(API_DELETE_ITEM, postData, {\n      headers\n    }).then(response => {\n      console.log('Response:', response.data.message);\n    }).catch(error => {\n      console.error('Error:', error);\n    });\n    newData().then();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"SignInForm\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: 'title',\n      children: \"My List\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Formik, {\n      initialValues: {\n        newItem: ''\n      },\n      onSubmit: (values, {\n        resetForm\n      }) => {\n        save(values).then();\n        resetForm();\n      },\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: list.map(element => /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: 'list',\n            children: /*#__PURE__*/_jsxDEV(\"li\", {\n              id: 'list-line',\n              children: [element.id, \" \", element.name, /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: 'delete-item',\n                id: element.id,\n                onClick: () => deleteLine(element.id).then(),\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 33\n            }, this)\n          }, uuidv4(), false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"newItem\",\n            children: \"Add new item to list\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 78\n          }, this), /*#__PURE__*/_jsxDEV(Field, {\n            type: \"text\",\n            id: \"newItem\",\n            name: \"newItem\",\n            className: 'newItem'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: 'save-item',\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n}\n_s(UserList, \"909LZpe3ceGz+JuQgLVS3rvgtxE=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = UserList;\nvar _c;\n$RefreshReg$(_c, \"UserList\");","map":{"version":3,"names":["axios","useEffect","useState","Formik","Field","Form","v4","uuidv4","API_SAVE_ITEM","API_LIST","API_DELETE_ITEM","useLocation","useNavigate","useParams","jsxDEV","_jsxDEV","UserList","_s","navigate","location","list","setList","token","setToken","headers","newData","get","then","response","data","todos","catch","error","console","state","save","values","postData","id","length","name","newItem","post","log","message","deleteLine","itemId","className","children","fileName","_jsxFileName","lineNumber","columnNumber","initialValues","onSubmit","resetForm","map","element","type","onClick","htmlFor","_c","$RefreshReg$"],"sources":["/Users/oksanapopova/Desktop/ReactUserList/client/src/pages/UserListPage/UserList.jsx"],"sourcesContent":["import axios from \"axios\";\nimport {useEffect, useState} from \"react\"\nimport {Formik, Field, Form} from \"formik\";\nimport '../style.scss'\nimport {v4 as uuidv4} from 'uuid';\nimport { API_SAVE_ITEM, API_LIST, API_DELETE_ITEM } from '../../urls';\nimport {useLocation, useNavigate, useParams} from \"react-router-dom\";\n\nexport default function UserList() {\n    const navigate = useNavigate()\n    const location = useLocation();\n    const [list, setList] = useState([])\n    const [token, setToken] = useState('')\n    const headers = {\n        'Authorization': token, 'Content-Type': 'application/json'}\n\n    const newData = async () => {\n        await axios.get(API_LIST, {headers})\n            .then(response => {\n                setList(response.data.todos)\n            })\n            .catch(error => {\n                console.error('Error:', error);\n            });\n    }\n    useEffect(() => {\n        try {\n            if(location.state.token) {\n                setToken(location.state.token)\n                newData().then()\n            }\n        } catch (error) {\n            console.error(error)\n            navigate('/error')\n        }\n\n    }, [])\n    const save = async (values) => {\n        const postData = {\n            id: list.length + 1,\n            name: values.newItem,\n        };\n\n        await axios.post(API_SAVE_ITEM, postData, {headers})\n            .then(response => {\n                console.log('Response:', response.data.message);\n            })\n            .catch(error => {\n                console.error('Error:', error);\n            });\n        newData().then()\n    }\n\n    const deleteLine = async (itemId) => {\n        const postData = {\n            id: itemId\n        };\n        await axios.post(API_DELETE_ITEM, postData, {headers})\n            .then(response => {\n                console.log('Response:', response.data.message);\n            })\n            .catch(error => {\n                console.error('Error:', error);\n            });\n        newData().then()\n    }\n\n    return (\n        <div className='SignInForm'>\n            <h2 className={'title'}>My List</h2>\n            <Formik\n                initialValues={{\n                    newItem: '',\n                }}\n                onSubmit={(values, { resetForm }) => {\n                    save(values).then()\n                    resetForm()\n                }}\n            >\n                <Form>\n                    <div>\n                        {list.map(element => (\n                            <ul className={'list'} key={uuidv4()}>\n                                <li  id={'list-line'}>\n                                    {element.id} {element.name}\n                                    <button type=\"button\" className={'delete-item'} id={element.id}\n                                            onClick={() => deleteLine(element.id).then()}>Delete\n                                    </button>\n                                </li>\n                            </ul>\n                        ))}\n\n                    </div>\n                    <div>\n                        <label htmlFor=\"newItem\">Add new item to list</label><br/>\n                        <Field type=\"text\" id=\"newItem\" name=\"newItem\" className={'newItem'}/>\n                    </div>\n                    <button type=\"submit\" className={'save-item'}>Save</button>\n                </Form>\n            </Formik>\n        </div>\n    )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}